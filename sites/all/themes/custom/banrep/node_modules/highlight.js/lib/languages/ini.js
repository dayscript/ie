module.exports = function(hljs) {
  var STRING = {
    className: "string",
    contains: [hljs.BACKSLASH_ESCAPE],
    variants: [
      {
        begin: "'''", end: "'''",
        relevance: 10
      }, {
        begin: '"""', end: '"""',
        relevance: 10
      }, {
        begin: '"', end: '"'
      }, {
        begin: "'", end: "'"
      }
    ]
  };
  return {
    aliases: ['toml'],
    case_insensitive: true,
    illegal: /\S/,
    contains: [
      hljs.COMMENT(';', '$'),
      hljs.HASH_COMMENT_MODE,
      {
        className: 'section',
        begin: /^\s*\[+/, end: /\]+/
      },
      {
<<<<<<< HEAD
        begin: /^[a-z0-9\[\]_-]+\s*=\s*/, end: '$',
=======
        begin: /^[a-z0-9\[\]_\.-]+\s*=\s*/, end: '$',
>>>>>>> be4427ec9de1b66f0b9db9482bab10352696cef7
        returnBegin: true,
        contains: [
          {
            className: 'attr',
<<<<<<< HEAD
            begin: /[a-z0-9\[\]_-]+/
=======
            begin: /[a-z0-9\[\]_\.-]+/
>>>>>>> be4427ec9de1b66f0b9db9482bab10352696cef7
          },
          {
            begin: /=/, endsWithParent: true,
            relevance: 0,
            contains: [
<<<<<<< HEAD
=======
              hljs.COMMENT(';', '$'),
              hljs.HASH_COMMENT_MODE,
>>>>>>> be4427ec9de1b66f0b9db9482bab10352696cef7
              {
                className: 'literal',
                begin: /\bon|off|true|false|yes|no\b/
              },
              {
                className: 'variable',
                variants: [
                  {begin: /\$[\w\d"][\w\d_]*/},
                  {begin: /\$\{(.*?)}/}
                ]
              },
              STRING,
              {
                className: 'number',
                begin: /([\+\-]+)?[\d]+_[\d_]+/
              },
              hljs.NUMBER_MODE
            ]
          }
        ]
      }
    ]
  };
};